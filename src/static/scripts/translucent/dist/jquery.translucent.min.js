/* 
 * jQuery translucent 1.0.9
 * Copyright (c) 2017, Sanggyeong Jo
 * Lisensed under the MIT
 * 
 * Dependencies:
 *  jQuery >= 1.6
 * 
 * Contacts
 *  Github : github.com/byeolbit
 *  Email : info@byeolbit.com
 *          sanggyeong.jo@gmail.com
 *
 * You can find this project at https://github.com/byeolbit/translucent.js
 */
!function(a){"object"==typeof module&&"object"==typeof module.exports?module.exports=a(require("jquery"),window,document):a(jQuery,window,document)}(function(a,b,c,d){function g(b,c,d){this.element=b,this.bgElement=c,this.options=a.extend({},f,d),this._defaults=f,this._name=e,this.init()}var e="translucent",f={filterValue:10,cardColor:"white",shadow:!0};a.extend(g.prototype,{init:function(){var c=this;c.$element=a(c.element),c.$bgElement=a(c.bgElement),a.extend(this,c._initStructure(c.$element)),c._styleInit(c.$element,c.$cardContents,c.$cardContainer,c.options.shadow,c.options.cardColor),a(b).resize(function(){c._cardBgInit(c.$element,c.$bgElement,c.cardBgStyle,c.options.filterValue)}),a(b).bind("load",function(){a.each(c.$element,function(){c._cardBgInit(c.$element,c.$bgElement,c.cardBgStyle,c.options.filterValue)})}),c._observeBackgroundChange(),c._observeStyleChange()},destroy:function(){this.$element.unbind("destroyed",this._teardown()),this.$cardBgContainer.empty().remove(),this.$cardContents.detach().appendTo(this.$element),this.$cardContainer.remove(),this._teardown(this)},_teardown:function(b){b.styleObserver.disconnect(),b.bgObserver.disconnect(),a("#tl-Card-css").remove(),a.removeData(b,"plugin_"+b._name)},_initStructure:function(b){var c=b.find(".tl-card-contents").detach(),d=a('<div class = "tl-card-bg-container"></div>').appendTo(b),e=a('<div class = "tl-card-bg"></div>').appendTo(d),f=a('<div class = "tl-card-container"></div>').appendTo(b);return c.appendTo(f),{$cardContents:c,$cardBgContainer:d,$cardBg:e,cardBgStyle:e[0].style,$cardContainer:f}},_styleInit:function(b,d,e,f,g){switch(f&&e.css("box-shadow","0px 20px 20px rgba(0,0,0,0.5)"),b.children().each(function(){a(this).css({height:b.height(),width:b.width()})}),g){case"clear":g="rgba(255,255,255,0)";break;case"white":g="rgba(255,255,255,0.4)";break;case"grey":g="rgba(120,120,120,0.4)";break;case"black":g="rgba(30,30,30,0.7)"}if(d.css("background-color",g),e.position({my:"center",at:"center",of:b}),!c.getElementById("tl-Card-css")){var h='<style type="text/css" id="tl-Card-css">.tl-card-container {border: rgba(200,200,200,0.5) solid 1px;border-radius: 10px; overflow: hidden;position: relative; transition: box-shadow 0.4s ease;} .tl-card-bg-container {border-radius: 10px;overflow: hidden; position: relative;} .tl-card-contents {overflow: hidden;position: relative; border-radiu: 10px;}</style>';a(h).appendTo("head")}},_cardBgInit:function(b,c,d,e){function k(b){b=b.slice(4,-1).replace(/"/g,"");var c=new Image;return a(c).attr("src",b),{width:c.naturalWidth,height:c.naturalHeight}}function l(a,b,c){var e,g,d=k(f);if("cover"==c)e=a.height(),g=d.width*(e/d.height);else{if(c.indexOf("%")===-1)return c;g=a.width(),e=d.height*(g/d.width)}return g+"px "+e+"px"}var f=c.css("background-image"),g=c.css("background-repeat"),h=c.css("background-size"),i=b.height(),j=b.width();d.cssText="background-image: "+f+"; background-repeat: "+g+"; filter: blur("+e+"px); margin-left: -"+e+"px; margin-top: -"+e+"px; height: "+(i+2*e)+"px; width: "+(j+2*e)+"px;",d.backgroundSize=l(c,f,h),this._applyTransparent(b,c,d,e)},_applyTransparent:function(a,b,c,d){var e=b.css("backgroundAttachment"),f=b.offset(),g=a.offset();c.backgroundAttachment=e,"fixed"!=e&&(c.backgroundPosition=f.left-(g.left-d)+"px "+(f.top-(g.top-d))+"px")},_observeBackgroundChange:function(){var a=this,b=a.$bgElement[0];a.bgObserver=new MutationObserver(function(b){b.forEach(function(b){a._cardBgInit(a.$element,a.$bgElement,a.cardBgStyle,a.options.filterValue)})});var c={attributes:!0,attributeFilter:["style"]};a.bgObserver.observe(b,c)},_observeStyleChange:function(){var a=this,b=a.element,c=a.$element.offset(),d=a.$element.height(),e=a.$element.width();a.styleObserver=new MutationObserver(function(b){b.forEach(function(b){c!==a.$element.offset()&&(c=a.$element.offset(),a._applyTransparent(a.$element,a.$bgElement,a.cardBgStyle,a.options.filterValue));var f=a.$element.height(),g=a.$element.width();d!=f&&e!=g||(d=f,e=g,a._cardBgInit(a.$element,a.$bgElement,a.cardBgStyle,a.options.filterValue))})});var f={attributes:!0,childList:!0,characterData:!0,attributeFilter:["style"]};a.styleObserver.observe(b,f)},blur:function(a){var b=this;this.options.filterValue=a,b._cardBgInit(b.$element,b.$bgElement,b.cardBgStyle,b.options.filterValue)}}),a.fn[e]=function(b){var c=arguments;return c[1]!==d&&"object"!=typeof c[1]||"#"!==b[0]?"string"==typeof b&&"_"!==b[0]&&"init"!==b?this.each(function(){var d=a.data(this,"plugin_"+e),f=Array.prototype.slice.call(c,1);d instanceof g&&"function"==typeof d[b]&&d[b].apply(d,f)}):void 0:this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new g(this,c[0],c[1]))})}});